<!DOCTYPE html>
<html>
<title>About the event</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
<link rel="stylesheet" href="stylesheet.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css">
<style>
body, html {
    height: 100%;
    font-family: "Inconsolata", sans-serif;
}
.bgimg {
    background-position: center;
    background-size: cover;
    background-image: url("frontpage.jpg");
    min-height: 75%;
}

.white-box {
    background-color: white;
    color: black;
}
.menu {
    display: none;
}
</style>
<!-- Header with image -->
<!-- Header with image -->
<header class="bgimg w3-display-container w3-grayscale-min" id="home">
        <div class="w3-display-bottomleft w3-center w3-padding-large w3-hide-small">
          <span class="w3-tag">from 19:00 until 03:00</span>
        </div>
        <div class="w3-display-middle w3-center">
          <span class="white-box" style="font-size:90px" id="eventName">Easter Lunch</span>
        </div>
        <div class="w3-display-bottomright w3-center w3-padding-large">
          <span class="w3-text-white">BÃ¸rglum kollegiet</span>
        </div>
      </header>
      

<!-- About Container -->
<div  id="about">
  <div>
    <br>
    <h2 >Details about the Event</h2>
    <p id="eventDescription">Bring costumes and your friends for the best event of the year</p>
  </div>
</div>

<!-- Menu Container -->
<div class="w3-container" id="menu">
  <div class="w3-content" style="max-width:700px">
 
    <h5 class="w3-center w3-padding-48"><span class="w3-tag w3-wide">Comment on the event</span></h5>

    <div class="row commentInput bg-light">
      <div class="col align-self-center">
        <form id="comment-form">
          <div class="input-group">
            <input type="text" class="form-control" id="eventComment" placeholder="Comment about the event here">
            <div class="input-group-append">
              <button class="btn btn-primary">Comment!</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Contact/Area Container -->
<div class="w3-container" id="where" style="padding-bottom:32px;">
  <div class="w3-content" style="max-width:700px">
    <h5 class="w3-center w3-padding-48"><span class="w3-tag w3-wide">Do you want to participate?</span></h5>
    <p>Add yourself to the guestlist</p>
 
  
    <form id="eventForm">
      <button type="button" class="btn btn-primary" id="participatebutton" data-toggle="modal" data-target="#exampleModal">Participate</button>
      </div> 
<!--
  </form>
  <div class="col-3 user-list bg-light">
    <div class="row">
      <div class="col">
        <form id="Guestlist-form">
          <div class="input-group input-group-sm mt-3 mb-1">
            <div class="input-group-append">
                    <button type="button" class="btn btn-primary" id="participatebutton" data-toggle="modal" data-target="#exampleModal">Participate</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <ul class="p-0" id="event-users">
        </ul>
      </div>
    </div>
  </div>
  -->


<!-- End page content -->
</div>

</body>
</html>



  <!-- Include our javascript code -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="app-with-api.js"></script>

  <script>

    var eventInfo = null;

  // TODO: make this finding of dormitryId more serious - ATM it is naive :-)
  var rawSearch = document.location.search;
  var params = rawSearch.replace('?','').split('&')
  var eventId = params[0].split('=')[1];
  var dormitryId = params[1].split('=')[1];

  // fetch event for a given dormitry
function fetchEvent(cbReady) {

fetch(`/api/dormitories/${dormitryId}/event/${eventId}`, {})
          .then(response => response.json())
          .then(response => {
            eventInfo = response;
              cbReady();
          })
}

function renderEvent() {
  const eleEventName = document.querySelector('#eventName');
  eleEventName.innerText = eventInfo.eventname;
  const eleEventDescription = document.querySelector('#eventDescription');
  eleEventDescription.innerText = eventInfo.eventDescription;
  /*
  let htmlList = '';
  eventInfo.map((event, i) => {
    htmlList+= `<li><a href="event2.html?event=${event.id}&dormitoryId=${event.dormitoryId}" accesskey="${i+1}" style="text-decoration:none">${event.eventname}</a></li>`;
  });
  if (htmlList!=='') {
    eleeventInfo.innerHTML = htmlList;
  }
  */
  console.log(eventInfo);
}


fetchEvent(renderEvent);

</script>
</body>
</html>
